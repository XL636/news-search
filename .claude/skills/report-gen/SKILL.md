# report-gen — 全球创新日报生成

## 触发条件
- 用户说 "生成报告"、"generate report"、"日报"、"digest"
- `/report-gen` 命令
- 由 `insight-radar` 全流程编排自动调用

## 执行步骤

### 1. 读取分类后数据
从 SQLite 数据库读取 classified_items：
```bash
cd D:/claude/news-search && python -c "
import json, sys
sys.path.insert(0, '.')
from src.storage.store import get_connection, init_db, get_classified_items, get_stats
conn = get_connection()
init_db(conn)
items = get_classified_items(conn)
stats = get_stats(conn)
print('=== STATS ===')
print(json.dumps(stats, indent=2))
print('=== ITEMS ===')
print(json.dumps([i.model_dump(mode='json') for i in items], indent=2, default=str, ensure_ascii=False))
conn.close()
"
```

### 2. 生成 Markdown 日报（Claude 驱动）
基于 classified_items 生成结构化日报，格式如下：

```markdown
# 🌐 InsightRadar 全球创新日报
> {YYYY-MM-DD} | 数据源: GitHub, Hacker News, RSS | 共 N 条

---

## 📌 执行摘要
今日 3-5 条最重要的技术进展，每条 1-2 句话概括其意义。

---

## 🔥 热度排行 Top 10

| # | 热度 | 标题 | 领域 | 来源 |
|---|------|------|------|------|
| 1 | 95 | [项目名](url) | AI/ML | GitHub, HN |
| ... | | | | |

### 详细分析
对 Top 10 每项展开 2-3 句分析：为什么重要、技术亮点、潜在影响。

---

## 📊 领域动态

### AI/ML
- 条目列表和简要分析

### DevTools
- 条目列表和简要分析

（按条目数量从多到少排列各领域，空领域跳过）

---

## 🔗 跨平台强信号
列出在 2 个以上数据源同时出现的项目，这些通常是最值得关注的。

---

## 📈 今日数据概览
- 原始采集: X 条
- 清洗去重后: Y 条
- 分类标注: Z 条
- 覆盖领域: N 个
- 平均热度: XX

---
*Generated by InsightRadar | {timestamp}*
```

### 3. 保存日报
将生成的 Markdown 写入文件：
```
output/digests/{YYYY-MM-DD}-digest.md
```

使用 Write 工具写入文件，路径为：`D:\claude\news-search\output\digests\{YYYY-MM-DD}-digest.md`

### 4. 输出确认
向用户汇报：
- 日报已生成
- 文件路径
- 包含条目总数和覆盖领域数

## 写作原则
- 使用中文撰写，技术术语保留英文原名
- 客观陈述事实，避免过度炒作
- 突出"为什么这个重要"而不仅仅是"发生了什么"
- 对于开源项目，提及其技术亮点和应用场景
- 数据驱动：引用 stars 数、增长率等具体数字
